<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>domineer.js</title>

    <setup>
        // Setup tags are evaluated before any other tags and can be used to
        // set variables at the eleventh hour. The locals object is good for
        // this. It can hold any values you wish and is preserved between tags.

        locals.coinResult = Math.floor(Math.random() * 101);
    </setup>
</head>
<body>
    <h1>Hello, world!</h1>
    <p>This is a test page generated by domineer.js at <expr>this.now</expr>.</p>
    <p>
        As you can see, domineer allows you to embed
        <expr>this.languages[this.languageChoice]</expr>
        expressions into the HTML document using the <code>&lt;expr&gt;</code> tag.
    </p>
    <p>
        HTML code such as <code><expr>this.html</expr></code> is escaped, as the
        <code>&lt;expr&gt;</code> tag is automagically replaced by a text node!
        If you want to embed arbitrary HTML into a document though, you can use
        the <code>html</code> attribute to parse it as HTML and insert the
        resulting <expr html>this.html</expr>.
    </p>
    <p>Any valid JavaScript expression can be used!
        <expr>this.n</expr>! =
        <expr>
            (function(){
                var value = 1;
                for (var i = 1; i &lt; this.n; i++){
                    value *= i;
                }
                return value;
            }).apply(this)
        </expr>
    </p>
    
    <hr>

    <p>
        Let's demonstrate branching by flipping a coin with
        <code>Math.random</code>!
    </p>
    <if test="locals.coinResult &lt; 50">
        <p>You flipped heads.</p>
        <elseif test="locals.coinResult &lt; 100">
            <p>You flipped tails.</p>
            <else>
                <p>The coin landed on it's edge!</p>
            </else>
        </elseif>
    </if>
    <p>
        Branching is <if test="Math.random() >= 0.5">awesome<else>cool</else></if>!
    </p>

    <hr>

    <p>
        You can use the <code>&lt;foreach&gt;</code> tag in order to iterate
        over an array of values. The nodes in the <code>&lt;foreach&gt;</code>
        tag are duplicated for each value in the array, and they all replace
        the <code>&lt;foreach&gt;</code>. If the length of the array is zero,
        the foreach is simply removed from the DOM.
    </p>
    <ul>
        <foreach in="this.languages" as="language">
            <li>
                <expr>locals.language</expr>
                <if test="locals.language == 'CoffeeScript'">
                    &lt;3
                </if>
            </li>
        </foreach>
    </ul>

    <hr>

    <p>
        You can set the attributes of an element by prefixing the attribute
        name with a dollar-sign ($). This link to
        <a $href="this.link.url"><expr>this.link.title</expr></a>
        was programtically generated.
    </p>
    <p>
        In the case of an <code>&lt;input&gt;</code> tag, you can automagically
        set the <code>value</code> attribute from <code>this[name]</code> by
        specifing the <code>jsvalue</code> attribute. This is useful for forms.
    </p>
    <p>
        Username: <input type="text" name="name" jsvalue><br>
        Password: <input type="password" name="password" jsvalue><br>
        Email: <input type="email" name="email" jsvalue><br>
    </p>

    <hr>

    <p><code>&lt;script&gt;</code> tags are passed on through to the output.</p>
    <p>Javascript, as you know it, is <strong id='jsstatus'>DISABLED</strong>.</p>

    <!-- external and internal scripts -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script>$(function(){ $('#jsstatus').text('ENABLED'); });</script>
</body>
</html>
